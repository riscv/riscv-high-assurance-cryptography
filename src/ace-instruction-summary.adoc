[comment]
--
[[ACE-instructions-overview]]
==== Instructions Overview

ACE provides a number of unprivileged instructions, some implemented as CSR read/write operations.
The notation `K[Xd]`, for a GPR `Xd`, refers to the CR whose number is contained in `Xd`,
and `Kn|K[Xn]` means that there are two different encodings for when the CR number is passed as an immediate (`Kn`) or in `Xn`.

.The ACE instructions
[width="100%",cols="17%,25%,58%",options="header",subs="+macros"]
|===
| Instruction         | Operands                         |  Description
| `ace.enable` +
`ace.disable`         |                                  |  Enables/Disables ACE.
| `ace.reset`         |                                  |  Resets ACE.
| `ace.init`          | `Kd\|K[Xd],%offset(Xs)`          |  Sets a CR's metadata and content.
| `ace.clear`         | `Kd\|K[Xd]`                      |  Clears a CR and marks it as no longer in use and clean.
| `ace.export`        | `%offset(Xn),Ks\|K[Xs]`          |  Securely exports the content of a CR to memory.
| `ace.import{.S}`    | `Kd\|K[Xd],%offset(Xn)`          |  Authenticates and imports an SCC from memory. +
 `ace.import.S` provides optional support for system-defined formats.
| `ace.exec`
| A. {nbsp}{nbsp} `Vd,Kn\|K[Xn],Vs` +
  B. {nbsp}{nbsp} `{nbsp}{nbsp}{nbsp}Kn\|K[Xn],Vs` +
  C. {nbsp}{nbsp} `Vd,Kn\|K[Xn]` +
  D. {nbsp}{nbsp} `{nbsp}{nbsp}{nbsp}Kn\|K[Xn]`
| Performs a cryptographic operation. These instructions may modify CC state. This instruction admits four _Forms_, depending on whether it accepts an input or not, and whether it produces an output or not.
| `ace.size`
| `Xd,Ks\|K[Xs]` +
`Xd,Xs` .2+|  Returns the SCC size in bytes for CR `Ks`/`K[Xs]` or for an algorithm with metadata `Xs`.
Returns zero if the algorithm is unsupported.
`ace.available` is an alias for `ace.size`.
| `ace.available`     | `Xd,Xs`
| `ace.clone`         | `Kd\|K[Xd],Ks\|K[Xs]`            |  Clones a source CR to a destination CR.
| `ace.derive`        | `Kd\|K[Xd],Ks\|K[Xs]` +
`Kd\|K[Xd],Ks\|K[Xs],Vs2` +
|  Optional. Configures destination CR using source CR (e.g., the source CR could hold a KEM, and derive symmetric keys).
| `ace.state` +
`(ace.dir)`
| `Kd\|K[Xd],#immed` +
`Kd\|K[Xd],#immed,Xs` |  Modifies algorithm state (e.g., phase transitions). `ace.dir` is an alias for `ace.state`.
| `ace.restrict` +
  `(ace.harden)`      | `Kd\|K[Xd],Xs`                   |  Narrows Usage Policies and enables/increases side-channel protection.
   Weakening Usage Policies and SCA protection is not permitted. `ace.harden` is an alias for `ace.restrict`.
| `ace.input`         | `Kd\|K[Xd],%offset(Xs)`          |  Optional. Provides input to the algorithm (for long inputs).
| `ace.output`        | `%offset(Xd),Ks\|K[Xs]`          |  Optional. Writes output from the algorithm (for long outputs).
| `ace.error`         | `Xd`                             |  Writes the ACE unit error code to GPR `Xd`.
|===
--
